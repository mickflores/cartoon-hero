// PVD Pixel v1.11
!function(f,l,r){"use strict";function e(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function n(i){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?e(Object(o),!0).forEach(function(t){var e,n,r;e=i,r=o[n=t],n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach(function(t){Object.defineProperty(i,t,Object.getOwnPropertyDescriptor(o,t))})}return i}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var c={id:"",params:{},version:1.11},m=function(){function e(){o(this,e)}return u(e,null,[{key:"isPresent",value:function(t){return null!=t&&""!==t}},{key:"now",value:function(){return+new Date}},{key:"guid",value:function(){return c.version+"-xxxxxxxx-".replace(/[x]/g,function(t){var e=36*Math.random()|0;return("x"==t?e:3&e|8).toString(36)})+(+new Date).toString(36)}},{key:"optionalData",value:function(t){return!1===e.isPresent(t)?"":"object"===i(t)?e.optionalData(JSON.stringify(t)):"function"==typeof t?e.optionalData(t()):String(t)}}]),e}(),s=function(){function t(){o(this,t)}return u(t,null,[{key:"nameAndVersion",value:function(){var t,e=navigator.userAgent,n=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?"IE "+((t=/\brv[ :]+(\d+)/g.exec(e)||[])[1]||""):"Chrome"===n[1]&&null!=(t=e.match(/\b(OPR|Edge)\/(\d+)/))?t.slice(1).join(" ").replace("OPR","Opera"):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(t=e.match(/version\/(\d+)/i))&&n.splice(1,1,t[1]),n.join(" "))}},{key:"isMobile",value:function(){return"ontouchstart"in f||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints}},{key:"userAgent",value:function(){return f.navigator.userAgent}}]),t}(),p=function(){function n(){o(this,n)}return u(n,null,[{key:"prefix",value:function(){return"_pvd_"}},{key:"set",value:function(t,e,n,r){var i,o=3<arguments.length&&void 0!==r?r:"/",a="";m.isPresent(n)&&((i=new Date).setTime(i.getTime()+60*n*1e3),a="expires=".concat(i.toGMTString(),"; "));var u=/(?:http[s]*\:\/\/)*.*?\.(?=([^\/]*\..{2,5}))/i,c=f.location.host,s=c.match(u)?c.match(u)[1]:c;l.cookie="".concat(this.prefix()).concat(t,"=").concat(e,"; ").concat(a,"domain=.").concat(s,"; path=").concat(o,"; SameSite=Lax")}},{key:"get",value:function(t){for(var t="".concat(this.prefix()).concat(t,"="),e=l.cookie.split(";"),n=0;n<e.length;n++){for(var r=e[n];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}}},{key:"delete",value:function(t){this.set(t,"",-100)}},{key:"exists",value:function(t){return m.isPresent(this.get(t))}},{key:"setUtms",value:function(){for(var t=["utm_source","utm_medium","utm_term","utm_content","utm_campaign","utm_source_platform","utm_creative_format","utm_marketing_tactic"],e=!1,n=0,r=t.length;n<r;n++)if(m.isPresent(g.getParameterByName(t[n]))){e=!0;break}if(e){for(var i,o={},n=0,r=t.length;n<r;n++)i=g.getParameterByName(t[n]),m.isPresent(i)&&(o[t[n]]=i);this.set("utm",JSON.stringify(o))}}},{key:"getUtm",value:function(t){if(this.exists("utm")){var e=JSON.parse(this.get("utm"));return t in e?e[t]:""}}},{key:"setUid",value:function(){var t,e=g.getParameterByName("pvd_cid")||n.getCid();this.exists("uid")?2===(t=this.get("uid").split("|")).length?this.set("uid",e?t[0]+"|"+e:t[0],1051200):this.set("uid",e?this.get("uid")+"|"+e:this.get("uid"),1051200):this.set("uid",e?m.guid()+"|"+e:m.guid(),1051200)}},{key:"getCid",value:function(){var t=this.get("uid");if(t){var e=t.split("|");if(2===e.length)return e[1]}}}]),n}(),g=function(){function t(){o(this,t)}return u(t,null,[{key:"getParameterByName",value:function(t,e){e=e||f.location.href,t=t.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)","i").exec(e);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}},{key:"externalHost",value:function(t){return t.hostname!=location.hostname&&0===t.protocol.indexOf("http")}}]),t}(),d=function(){function r(t,e,n){o(this,r),this.params=[],this.event=t,this.timestamp=e,this.optional=m.optionalData(n),this.buildParams(),this.send()}return u(r,[{key:"buildParams",value:function(){var t=this.getAttribute();for(var e in t)t.hasOwnProperty(e)&&this.setParam(e,t[e](e))}},{key:"getAttribute",value:function(){var t=this;return n({id:function(){return c.id},uid:function(){return p.get("uid")},pvd_cid:function(){return p.getCid()},ev:function(){return t.event},ed:function(){return t.optional},v:function(){return c.version},dl:function(){return f.location.href},rl:function(){return l.referrer},ts:function(){return t.timestamp},de:function(){return l.characterSet},sr:function(){return f.screen.width+"x"+f.screen.height},vp:function(){return f.innerWidth+"x"+f.innerHeight},cd:function(){return f.screen.colorDepth},dt:function(){return l.title},bn:function(){return s.nameAndVersion()},md:function(){return s.isMobile()},ua:function(){return s.userAgent()},tz:function(){return(new Date).getTimezoneOffset()},utm_source:function(t){return p.getUtm(t)},utm_medium:function(t){return p.getUtm(t)},utm_term:function(t){return p.getUtm(t)},utm_content:function(t){return p.getUtm(t)},utm_campaign:function(t){return p.getUtm(t)},utm_source_platform:function(t){return p.getUtm(t)},utm_creative_format:function(t){return p.getUtm(t)},utm_marketing_tactic:function(t){return p.getUtm(t)}},c.params)}},{key:"setParam",value:function(t,e){m.isPresent(e)?this.params.push("".concat(t,"=").concat(encodeURIComponent(e))):this.params.push("".concat(t,"="))}},{key:"send",value:function(){f.navigator.sendBeacon?this.sendBeacon():this.sendImage()}},{key:"sendBeacon",value:function(){f.navigator.sendBeacon(this.getSourceUrl())}},{key:"sendImage",value:function(){this.img=l.createElement("img"),this.img.src=this.getSourceUrl(),this.img.style.display="none",this.img.width="1",this.img.height="1",l.getElementsByTagName("body")[0].appendChild(this.img)}},{key:"getSourceUrl",value:function(){return"".concat("https://pvdpix.com/pixel.gif","?").concat(this.params.join("&"))}}]),r}();p.setUid(),r.process=function(t,e,n){"init"===t?c.id=e:"param"===t?c.params[e]=function(){return n}:"event"===t&&("pageload"!==e||c.pageLoadOnce?"pageload"!==e&&"pageclose"!==e&&new d(e,m.now(),n):(c.pageLoadOnce=!0,c.pageLoadTimestamp=r.t,new d(e,r.t,n)))};for(var t=0,h=r.queue.length;t<h;t++)r.process.apply(r,r.queue[t]);var v="object"===("undefined"==typeof safari?"undefined":i(safari))&&safari.pushNotification,y="onpageshow"in self&&!v?"pagehide":"unload";f.addEventListener(y,function(){var t;c.pageCloseOnce||(c.pageCloseOnce=!0,t=m.now()-c.pageLoadTimestamp,new d("pageclose",m.now(),function(){return m.isPresent(c.externalHost)&&m.now()-c.externalHost.time<5e3?{top:t,externalLink:c.externalHost.link}:{top:t}}))});var b=s.isMobile()?"touchstart":"mousemove";f.addEventListener(b,function(){c.pageStartOnce||(c.pageStartOnce=!0,new d("session_start",m.now()))}),f.onload=function(){for(var t=l.getElementsByTagName("a"),e=0,n=t.length;e<n;e++)t[e].addEventListener("click",function(t){g.externalHost(this)&&(c.externalHost={link:this.href,time:m.now()})}.bind(t[e]));for(var r=l.querySelectorAll("[data-pvd-event]"),e=0,n=r.length;e<n;e++)r[e].addEventListener("click",function(t){var e=this.getAttribute("data-pvd-event");e&&new d(e,m.now(),this.getAttribute("data-pvd-data"))}.bind(r[e]))}}(window,document,window.pvd);